<% javascript 'new-user' %>

<% @user.password = @user.password_confirmation = nil %>
<%= title "Signup", :h1  %>
<% form_for @user do |f| %>
  <%= f.error_messages %>
  <fieldset>
    <legend>Your Details</legend>
    <ol>
      <li>
        <%= f.label :email, 'Your email address:' %><span class="mandatoryStar">*</span>
        <%= f.text_field :email %>
      </li>
      <li>
        <%= f.label :password %><span class="mandatoryStar">*</span>
        <%= f.password_field :password %>
      </li>
      <li>
        <%= f.label :password_confirmation, 'Confirm Password:' %><span class="mandatoryStar">*</span>
        <%= f.password_field :password_confirmation %>
      </li>
      <li>
        <%= f.label :district_id, 'Your area:' %><span class="mandatoryStar">*</span>
        <%= f.select :district_id, @districts, {:prompt => "- Please select -"} %>
      </li>
      <li>
        <%= f.label :first_name, 'Your first name:' %>
        <%= f.text_field :first_name %>
      </li>
      <li>
        <%= f.label :last_name, 'Your surname:' %>
        <%= f.text_field :last_name %>
      </li>
      <li>
        <%= f.label :receive_newsletter, 'Would you like to subscribe to our newsletter?' %>
        <%= f.check_box :receive_newsletter %>
      </li>
      <li>
        <%= f.label :professional, 'Are you a professional?' %>
        <%= f.check_box :professional   %>
      </li>
      <li id="link-user-professional"<%unless @user.professional?%>style="display: none;"<%end%>>Did you know you can be listed for free on beamazing.co.nz? <label for="user_free_listing">Yes, I want to be listed for free</label><%= f.check_box :free_listing%></li>
    </ol>
  </fieldset>
  <fieldset id="fieldset-professional-details"<%unless @user.professional?&&@user.free_listing?%>style="display: none;"<%end%>>
    <legend>Professional Details</legend>
    <ol>
      <li>
        <%= f.label :business_name, 'Business name' %><span class="mandatoryStar">*</span>
        <%= f.text_field :business_name  %>
      </li>
      <li>
        <%= f.label :address1, 'Address' %>
        <%= f.text_area :address1, :rows => "2"  %>
      </li>
      <li>
        <%= f.label :suburb, 'Suburb' %>
        <%= f.text_field :suburb  %>
      </li>
      <li>
        <%= f.label :phone_prefix, 'Phone' %>
        <%= f.select :phone_prefix, ["", "03", "04", "06", "07", "09"] %><%= f.text_field :phone_suffix  %>
      </li>
      <li>
        <%= f.label :mobile_prefix, 'Mobile' %>
        <%= f.select :mobile_prefix, ["", "021", "027", "29"] %><%= f.text_field :mobile_suffix, :size => 9 %>
      </li>
      <li>
        <%= f.label :city, 'City' %>
        <%= f.text_field :city %>
      </li>
      <li>
        <%= f.label :category1, 'Please enter up to 3 categories you would like to be listed in' %>
        Category1: <%= f.select :category1_id, @categories, {:include_blank => true } %><br/>
        Category2: <%= f.select :category2_id, @categories, {:include_blank => true } %><br/>
        Category3: <%= f.select :category3_id, @categories, {:include_blank => true } %><br/>
      </li>
    </ol>
  </fieldset>
  <div class="buttons">
    <label for=""></label>
    <%= submit_tag 'Sign up' %>
  </div>
<% end %>
<br/>